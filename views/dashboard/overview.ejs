<%- include('../partials/header.ejs') %>
<div class="container mt-5" style="padding: 3%">
  <h2 class="text-center mb-5">Revenue Statistics</h2>
  <div class="row mb-3">
    <div class="col-md-4">
      <label for="cinemaSelect" class="form-label">Select Cinema</label>
      <select class="form-select" id="cinemaSelect">
        <option value="">cinema1</option>
        <option value="">cinema2</option>
      </select>
    </div>
    <div class="col-md-4">
      <label for="movieSelect" class="form-label">Select Movie</label>
      <select class="form-select" id="movieSelect">
        <option value="">movie1</option>
        <option value="">movie2</option>
      </select>
    </div>
    <div class="col-md-2">
      <label for="startDate" class="form-label">From Date</label>
      <input type="date" class="form-control" id="startDate" />
    </div>
    <div class="col-md-2">
      <label for="endDate" class="form-label">To Date</label>
      <input type="date" class="form-control" id="endDate" />
    </div>
    <div class="col-md-12 mt-3">
      <button
        type="button"
        class="btn btn-primary"
        onclick="fetchRevenueData()"
      >
        Filter
      </button>
    </div>
  </div>
  <div class="row">
    <div id="revenueChart" style="width: 100%; height: 400px"></div>
  </div>
  <div class="mt-3">
    <h4>Total Revenue: <span id="totalRevenueLabel">$0</span></h4>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.0/dist/echarts.min.js"></script>
<script>
  // Dữ liệu ví dụ
  const data = [
    { date: "2024-01-01", revenue: 1000 },
    { date: "2024-01-02", revenue: 1200 },
    { date: "2024-01-03", revenue: 800 },
    { date: "2024-01-04", revenue: 1500 },
    { date: "2024-01-05", revenue: 900 },
  ];

  // Lấy phần tử div để render biểu đồ
  const chartDom = document.getElementById("revenueChart");
  const myChart = echarts.init(chartDom);

  // Cấu hình biểu đồ
  const option = {
    title: {
      text: "Doanh thu",
    },
    tooltip: {
      trigger: "axis",
    },
    xAxis: {
      type: "category",
      data: data.map((item) => item.date),
    },
    yAxis: {
      type: "value",
    },
    series: [
      {
        data: data.map((item) => item.revenue),
        type: "line",
      },
    ],
  };

  // Đưa dữ liệu và cấu hình vào biểu đồ
  myChart.setOption(option);
</script>
