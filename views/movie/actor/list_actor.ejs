<%- include('../../partials/header.ejs') %>

<div class="container mt-5" style="padding: 3%;">
  <h2 class="text-center">List of Actors</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Image</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
     
      <% actors.forEach(actors => { %>
      <tr>
        <td><%= actors._id %></td>
        <td><%= actors.name %></td>
        
        <td><img src="http://139.180.132.97:3000/images/<%= actors.image %>"  width="50"></td>
        <td>
          <button class="btn btn-info" onclick="editCinema(1)">Edit</button>
          <button class="btn btn-danger" onclick="deleteActors('<%= actors._id %>')">Delete</button>
        </td>
      </tr>
      <% }); %>
      <!-- Thêm các dòng dữ liệu tương tự nếu cần -->
    </tbody>
  </table>
</div>
<script>
  async function deleteActors(actorsId) {
    if (confirm('Bạn có chắc chắn muốn xoá đạo diễn này?')) {
      try {
        const response = await fetch(`/movie/actors/${actorsId}`, {
          method: 'DELETE',
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          alert('Xoá đạo diễn thành công!');
          window.location.reload();
        } else {
          alert('Đã xảy ra lỗi khi xoá đạo diễn.');
        }
      } catch (error) {
        alert('Đã xảy ra lỗi khi xoá đạo diễn.');
        console.error(error);
      }
    }
  }
</script>